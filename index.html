<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ  Ø«Ø¨Øª Ø±Ø§ÛŒÚ¯Ø§Ù† Ø¯Ú©ÙˆØ±Ø§Ø³ÛŒÙˆÙ†</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Vazir', Tahoma, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; padding: 20px; 
        }
        .container { max-width: 500px; margin: 0 auto; }
        .form-card { 
            background: white; border-radius: 20px; 
            padding: 40px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); 
            text-align: center;
        }
        h1 { 
            background: linear-gradient(45deg, #667eea, #764ba2); 
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; 
            margin-bottom: 20px; font-size: 1.8em;
        }
        input, select, textarea { 
            width: 100%; padding: 15px; margin: 10px 0; 
            border: 2px solid #e2e8f0; border-radius: 10px; 
            font-size: 16px; background: #f8fafc;
        }
        button { 
            background: linear-gradient(45deg, #48bb78, #38a169); 
            color: white; padding: 18px; border: none; 
            border-radius: 12px; cursor: pointer; font-size: 18px; 
            font-weight: bold; width: 100%; margin-top: 20px;
        }
        .success { 
            background: linear-gradient(135deg, #48bb78, #38a169); 
            color: white; border-radius: 15px; padding: 30px; 
            text-align: center; display: none;
        }
        .hidden { display: none; }
        .admin-panel { 
            background: white; border-radius: 20px; 
            padding: 40px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); 
            text-align: center; display: none;
        }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; text-align: right; border-bottom: 1px solid #eee; }
        .status { padding: 5px 10px; border-radius: 20px; color: white; font-weight: bold; }
        .seen { background: #4299e1; }
        .done { background: #48bb78; }
        @media (max-width: 480px) { .form-card, .admin-panel { padding: 30px 20px; } }
    </style>
</head>
<body>
    <div class="container">
        <!-- ÙØ±Ù… Ù…Ø´ØªØ±ÛŒ -->
        <div id="customerForm" class="form-card">
            <h1>ğŸ  Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ú©ÙˆØ±Ø§Ø³ÛŒÙˆÙ†</h1>
            <p style="color: #666; margin-bottom: 30px;">Ø±Ø§ÛŒÚ¯Ø§Ù† Ùˆ Ø¨Ø¯ÙˆÙ† ØªØ¹Ù‡Ø¯ - Û² Ø¯Ù‚ÛŒÙ‚Ù‡ Ø²Ù…Ø§Ù†</p>
            
            <input type="text" id="name" placeholder="ğŸ‘¤ Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ">
            <input type="tel" id="phone" placeholder="ğŸ“ Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³">
            <input type="text" id="address" placeholder="ğŸ“ Ø¢Ø¯Ø±Ø³ Ú©Ø§Ù…Ù„">
            <input type="text" id="project" placeholder="ğŸ  Ù†ÙˆØ¹ Ù¾Ø±ÙˆÚ˜Ù‡ (Ø¢Ø´Ù¾Ø²Ø®Ø§Ù†Ù‡ØŒ Ù¾Ø°ÛŒØ±Ø§ÛŒÛŒ...)">
            <input type="number" id="budget" placeholder="ğŸ’° Ø¨ÙˆØ¯Ø¬Ù‡ ØªÙ‚Ø±ÛŒØ¨ÛŒ (ØªÙˆÙ…Ø§Ù†)">
            <textarea id="notes" placeholder="ğŸ“ Ù…ØªØ±Ø§Ú˜ØŒ Ø³Ø¨Ú©ØŒ Ù†Ú©Ø§Øª Ù…Ù‡Ù…..." rows="3"></textarea>
            
            <select id="priority">
                <option value="Ø¹Ø§Ø¯ÛŒ">â­ Ø¹Ø§Ø¯ÛŒ</option>
                <option value="Ø¨Ø§Ù„Ø§">â­â­ Ø¨Ø§Ù„Ø§</option>
                <option value="ÙÙˆØ±ÛŒ">â­â­â­ ÙÙˆØ±ÛŒ</option>
            </select>
            
            <button onclick="submitForm()">âœ… Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª</button>
        </div>

        <!-- Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† -->
        <div id="adminLogin" class="form-card" style="display: none;">
            <h1>ğŸ” Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h1>
            <input type="password" id="adminPass" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
            <button onclick="loginAdmin()">ÙˆØ±ÙˆØ¯</button>
            <p style="font-size: 12px; color: #666; margin-top: 10px;">Ø±Ø§Ù‡Ù†Ù…Ø§: Ctrl+Enter</p>
        </div>

        <div id="adminPanel" class="admin-panel">
            <h1>ğŸ“‹ Ù„ÛŒØ³Øª Ù…Ø´ØªØ±ÛŒØ§Ù†</h1>
            <button onclick="logout()" style="background: #e53e3e; margin-bottom: 20px;">Ø®Ø±ÙˆØ¬</button>
            <div id="customersList"></div>
        </div>

        <!-- Ù…ÙˆÙÙ‚ÛŒØª -->
        <div id="successSection" class="success">
            <h2>ğŸ‰ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø«Ø¨Øª Ø´Ø¯!</h2>
            <p style="font-size: 18px;">Ø´Ù…Ø§Ø±Ù‡ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ: <strong id="trackId"></strong></p>
            <p>Ø¸Ø±Ù <strong>Û²Û´ Ø³Ø§Ø¹Øª</strong> ØªÙ…Ø§Ø³ Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒÙ… ğŸ“</p>
            <p style="font-size: 14px; opacity: 0.9;">Ù…Ù…Ù†ÙˆÙ† Ø§Ø² Ø§Ø¹ØªÙ…Ø§Ø¯ØªÙˆÙ†!</p>
        </div>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const isCustomer = urlParams.get('mode') === 'customer';
        
        // Ù†Ù…Ø§ÛŒØ´ ÙØ±Ù… Ù…Ø´ØªØ±ÛŒ ÛŒØ§ Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†
        if (isCustomer || !localStorage.getItem('adminMode')) {
            document.getElementById('customerForm').style.display = 'block';
            document.getElementById('adminLogin').style.display = 'none';
        } else {
            showAdminLogin();
        }

        // Ú©Ù„ÛŒØ¯ Ù…ÛŒØ§Ù†Ø¨Ø± Ø§Ø¯Ù…ÛŒÙ†
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'Enter') {
                showAdminLogin();
            }
        });

        function showAdminLogin() {
            document.getElementById('customerForm').style.display = 'none';
            document.getElementById('adminLogin').style.display = 'block';
            document.getElementById('adminPanel').style.display = 'none';
        }

        function loginAdmin() {
            const pass = document.getElementById('adminPass').value;
            if (pass === 'admin123') {
                localStorage.setItem('adminMode', 'true');
                loadCustomers();
            } else {
                alert('âŒ Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡!');
            }
        }

        function logout() {
            localStorage.removeItem('adminMode');
            document.getElementById('adminLogin').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('customerForm').style.display = 'block';
        }

        function submitForm() {
            const data = {
                name: document.getElementById('name').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value,
                project: document.getElementById('project').value,
                budget: document.getElementById('budget').value,
                notes: document.getElementById('notes').value,
                priority: document.getElementById('priority').value,
                track: 'TRK' + Date.now().toString().slice(-6),
                date: new Date().toLocaleDateString('fa-IR'),
                status: 'Ø¯ÛŒØ¯Ù‡ Ù†Ø´Ø¯Ù‡'
            };
            
            if (!data.name || !data.phone) {
                alert('âŒ Ù†Ø§Ù… Ùˆ Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª!');
                return;
            }
            
            let customers = JSON.parse(localStorage.getItem('customers')) || [];
            customers.unshift(data);
            localStorage.setItem('customers', JSON.stringify(customers));
            
            document.getElementById('trackId').textContent = data.track;
            document.getElementById('customerForm').classList.add('hidden');
            document.getElementById('successSection').style.display = 'block';
            
            const message = `ğŸ  Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¬Ø¯ÛŒØ¯ Ø¯Ú©ÙˆØ±Ø§Ø³ÛŒÙˆÙ†\n\nğŸ‘¤ ${data.name}\nğŸ“ ${data.phone}\nğŸ  ${data.project}\nğŸ’° ${data.budget}\nâ­ ${data.priority}\n\n#${data.track}`;
            setTimeout(() => {
                if (confirm('Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ÙˆØ§ØªØ³Ø§Ù¾ØŸ')) {
                    window.open(`https://wa.me/989123456789?text=${encodeURIComponent(message)}`);
                }
            }, 2000);
        }

        function loadCustomers() {
            const customers = JSON.parse(localStorage.getItem('customers')) || [];
            const list = document.getElementById('customersList');
            
            if (customers.length === 0) {
                list.innerHTML = '<p style="text-align:center;color:#666;">Ù‡ÛŒÚ† Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡</p>';
                return;
            }
            
            let html = '<table><tr><th>Ù†Ø§Ù…</th><th>ØªÙ„ÙÙ†</th><th>Ù¾Ø±ÙˆÚ˜Ù‡</th><th>Ø¨ÙˆØ¯Ø¬Ù‡</th><th>Ø§ÙˆÙ„ÙˆÛŒØª</th><th>ØªØ§Ø±ÛŒØ®</th><th>ÙˆØ¶Ø¹ÛŒØª</th></tr>';
            
            customers.forEach((customer, index) => {
                html += `
                    <tr>
                        <td>${customer.name}</td>
                        <td>${customer.phone}</td>
                        <td>${customer.project}</td>
                        <td>${customer.budget || 'Ù†Ø§Ù…Ø´Ø®Øµ'}</td>
                        <td>${customer.priority}</td>
                        <td>${customer.date}</td>
                        <td>
                            <select onchange="updateStatus(${index}, this.value)" style="border-radius:10px;">
                                <option ${customer.status === 'Ø¯ÛŒØ¯Ù‡ Ù†Ø´Ø¯Ù‡' ? 'selected' : ''}>Ø¯ÛŒØ¯Ù‡ Ù†Ø´Ø¯Ù‡</option>
                                <option ${customer.status === 'Ø¯ÛŒØ¯Ù‡ Ø´Ø¯Ù‡' ? 'selected' : ''}>Ø¯ÛŒØ¯Ù‡ Ø´Ø¯Ù‡</option>
                                <option ${customer.status === 'Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡' ? 'selected' : ''}>Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡</option>
                            </select>
                        </td>
                    </tr>
                `;
            });
            
            html += '</table>';
            list.innerHTML = html;
            document.getElementById('adminPanel').style.display = 'block';
            document.getElementById('adminLogin').style.display = 'none';
        }

        function updateStatus(index, status) {
            let customers = JSON.parse(localStorage.getItem('customers')) || [];
            customers[index].status = status;
            localStorage.setItem('customers', JSON.stringify(customers));
        }
    </script>
</body>
</html>
